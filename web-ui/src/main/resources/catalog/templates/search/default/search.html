<div class="navbar navbar-inverse" role="navigation"
     data-ng-include="'../../catalog/templates/top-toolbar.html'">
</div>

<div class="container gn-search-page" data-ng-controller="GnSearchController">
  <div class="" data-ng-controller="gnsDefault">

    <tabset id="main-tabset" type="pills">
      <tab heading="{{mainTabs.home.title}}" active="mainTabs.home.active">
        HOME
      </tab>
      <tab select="displayMapTab()" active="mainTabs.map.active">
        <tab-heading>
          {{mainTabs.map.title}}
          <span class="badge" ng-if="mainTabs.map.titleInfo">{{mainTabs.map.titleInfo}}</span>
        </tab-heading>
        <div gn-main-viewer="" map="searchObj.viewerMap">
        </div>
      </tab>
      <tab heading="{{mainTabs.search.title}}" active="mainTabs.search.active">
        <form data-ng-search-form="" class="form-horizontal" role="form">

          <!--ANY full text search input-->
          <div class="form-group row ">
            <div class="col-md-9">
              <input type="text" ng-model="searchObj.params.any" placeholder="{{'anyPlaceHolder' | translate}}"
                     typeahead="address for address in getAnySuggestions($viewValue)" typeahead-loading="anyLoading" class="form-control input-lg"
                     typeahead-min-length="1">
              <i ng-show="anyLoading" class="fa fa-refresh inner-spinner"></i>
            </div>
            <button type="button" data-ng-click="triggerSearch()" class="btn btn-primary btn-lg" data-translate>Search</button>

            <label type="button" class="btn btn-default btn-lg" ng-model="searchObj.advancedMode" btn-checkbox btn-checkbox-true="1" btn-checkbox-false="0">
              <i class="fa fa-cog"></i>
            </label>
          </div>

          <!--Advanced search form-->
          <div data-ng-show="searchObj.advancedMode" class="gn-advanced-searchform panel panel-default clearfix">

            <div class="panel-heading">Advanced search</div>

            <div class="col-md-4">
              <div class="form-group">
                <label for="categoriesF" class="col-md-4 col-sm-12 control-label">Categories</label>
                <div class="col-sm-8">
                  <input type="text" id="categoriesF" value="" class="form-control" />
                </div>
              </div>
              <div class="form-group">
                <label for="keywordsF" class="col-md-4 col-sm-12 control-label">Keywords</label>
                <div class="col-sm-8">
                  <input type="text" id="keywordsF" value="" class="form-control" data-ng-model="searchObj.params.keyword" gn-search-suggest="keyword" multi="true"/>
                </div>
              </div>
              <div class="form-group">
                <label for="orgNameF" class="col-md-4 col-sm-12 control-label">Organisation</label>
                <div class="col-sm-8">
                  <input type="text" id="orgNameF" value="" class="form-control" data-ng-model="orgName" gn-search-suggest="orgName"/>
                </div>
              </div>
            </div>

            <div class="col-md-4">
              <div gn-map-field="searchObj.searchMap"></div>
            </div>

            <div class="col-md-4">
              <div class="form-group">
                <label class="col-md-4 col-sm-12 control-label">DÃ©but</label>
                <div class="input-group date col-sm-8" data-date="" data-date-format="dd-mm-yyyy"
                  gn-bootstrap-datepicker="searchObj.params.creationDateFrom">
                  <input class="form-control" type="text">
                  <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                </div>
              </div>
              <div class="form-group">
                <label class="col-md-4 col-sm-12 control-label">Fin</label>
                <div class="input-group date col-sm-8" data-date="" data-date-format="dd-mm-yyyy"
                  gn-bootstrap-datepicker="searchObj.params.creationDateTo">
                  <input class="form-control" type="text">
                  <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
                </div>
              </div>
            </div>

          </div>

          <div class="row">

            <div ng-class="(!collapsed) ? 'col-md-9' : 'col-md-12'">
              <div class="panel panel-default">
                <div class="panel-heading">
                  <button class="btn btn-default filter" ng-class="{ active: !collapsed }"
                    ng-click="collapsed=!collapsed"><i class="fa fa-filter"></i></button>
                  <div gn-results-tpl-switcher template-url="resultTemplate" class="pull-right"></div>
                  <div sortby-combo params="searchObj.params"></div>
                </div>
                <div data-gn-facet-breadcrumb="currentFacets"></div>
                <div gn-results-container data-ng-class="{'bg-success' : searching}"
                  search-results="searchResults" template-url="resultTemplate" map="map"></div>
                <div class="panel-footer">
                  <div class="pull-right" hitsperpage-combo pagination-cfg="paginationInfo"></div>
                  <div data-gn-pagination="paginationInfo"></div>
                </div>
              </div>
            </div>

            <div ng-class="(!collapsed) ? 'col-md-3' : 'whidden'">
              <div class="panel panel-default">
                <div class="panel-heading">
                  <span data-translate>Refine search</span>
                </div>
                <div class="panel-body"
                  data-gn-facet-list="searchResults.facet"
                  data-facet-config="facetsConfig"
                  data-current-facets="currentFacets">
                </div>
              </div>
            </div>

          </div>

        </form>
      </tab>
    </tabset>
  </div>
</div>
