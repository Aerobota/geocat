<div fmt-transclude="html/2-level-entry.html" fmt-transclude-model="childData">
  <div class="thumbnail extent">
    <span fmt-if="!pdfOutput" fmt-only-children="true">
      <div class="input-group coord coord-north">
        <input type="text" class="form-control" value="{{n}}" readonly=""/>
        <span class="input-group-addon">N</span>
      </div>
      <div class="input-group coord coord-south">
        <input type="text" class="form-control" value="{{s}}" readonly=""/>
        <span class="input-group-addon">S</span>
      </div>
      <div class="input-group coord coord-east">
        <input type="text" class="form-control" value="{{e}}" readonly=""/>
        <span class="input-group-addon">E</span>
      </div>
      <div class="input-group coord coord-west">
        <input type="text" class="form-control" value="{{w}}" readonly=""/>
        <span class="input-group-addon">W</span>
      </div>
    </span>
    <script>

        // Display bbox with configured projection
        if("{{mapconfig.mapproj}}" == "EPSG:21781") {
          var transform = proj4('EPSG:4326', '+proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +k_0=1 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs');
          var ur = transform.forward([$(".coord-east > input").val(), $(".coord-north > input").val()]);
          var ll = transform.forward([$(".coord-west > input").val(), $(".coord-south > input").val()]);

          var round = Math.round;

          $(".coord-north > input").val(round(ur[1]));
          $(".coord-east > input").val(round(ur[0]));
          $(".coord-south > input").val(round(ll[1]));
          $(".coord-west > input").val(round(ll[0]));
        }

    </script>
    <img src="region.getmap.png?mapsrs={{mapconfig.mapproj}}&amp;amp;width={{mapconfig.width}}&amp;amp;background={{mapconfig.background}}&amp;amp;geom=Polygon(({{w}}%20{{n}},{{e}}%20{{n}},{{e}}%20{{s}},{{w}}%20{{s}},{{w}}%20{{n}}))&amp;amp;geomsrs={{geomproj}}"
         style="min-width:{{minwidth}}px; min-height:{{minheight}}px;"
         alt=""/>
    <div fmt-if="pdfOutput">
      <div>
        <span class="value">{{n}}</span> <span class="input-group-addon">N</span>
        <span class="value">{{s}}</span> <span class="input-group-addon">S</span>
      </div>
      <div>
        <span class="value">{{w}}</span> <span class="input-group-addon">W</span>
        <span class="value">{{e}}</span> <span class="input-group-addon">E</span>
      </div>
    </div>
  </div>
</div>